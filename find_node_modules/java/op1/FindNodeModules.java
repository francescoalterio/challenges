package find_node_modules.java.op1;
import java.io.File;
import java.util.ArrayList;

public class FindNodeModules {
    String currentPath;
    ArrayList<String> nodeModulesFound = new ArrayList<>();
    ArrayList<String> pathsToSearch = new ArrayList<>();

    public FindNodeModules(String initialPath) {
        this.pathsToSearch.add(initialPath);
    }

    public ArrayList<String> find() {
        while (!this.pathsToSearch.isEmpty()) {
            this.currentPath = this.pathsToSearch.remove(this.pathsToSearch.size() - 1);
            File dir = new File(this.currentPath);
            File[] dirContent = dir.listFiles();
            for(File file : dirContent) {
                if(file.isDirectory()) {
                    if(file.getName().equals("node_modules")) {
                        this.nodeModulesFound.add(file.getAbsolutePath());
                    } else {
                        this.pathsToSearch.add(file.getAbsolutePath());
                    }
                }
            }
        }

        return this.nodeModulesFound;
    }
}